<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battle Report - 20251211_172104</title>
    <link rel="stylesheet" href="battle_report.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Battle Report</h1>
            <p>Generated on 2025-12-11 17:21:04</p>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-value">0.00s</span>
                <span class="stat-label">Simulation Time</span>
            </div>
            <div class="stat-card">
                <span class="stat-value" style="color: var(--team1-color)">1</span>
                <span class="stat-label">Team 1 Units</span>
            </div>
            <div class="stat-card">
                <span class="stat-value" style="color: var(--team2-color)">1</span>
                <span class="stat-label">Team 2 Units</span>
            </div>
            <div class="stat-card">
                <span class="stat-value">2</span>
                <span class="stat-label">Total Active</span>
            </div>
        </div>

        <div class="controls">
            <input type="text" id="unitSearch" placeholder="Search units (ID, Type, Status)..." onkeyup="filterUnits()">
            <div class="buttons">
                <button onclick="toggleDetails(true)">Expand All</button>
                <button onclick="toggleDetails(false)">Collapse All</button>
            </div>
        </div>

        
        <div class="battle-map-container">
            <details open>
                <summary>Battlefield (120x40)</summary>
                <div class="battle-map" style="--cols:120;--rows:40"><div class="unit-cell team1" style="grid-column:21;grid-row:21">K</div><div class="unit-cell team2" style="grid-column:96;grid-row:21">P</div></div>
            </details>
        </div>

        
        <div class="breakdown-container">
            <h3>Unit Breakdown</h3>
            <div class="breakdown-grid">
                
            <div class="breakdown-card">
                <h4 style="color:var(--team1-color)">Team 1</h4>
                <table class="breakdown-table">
                    <thead><tr><th>Type</th><th>Count</th><th>%</th></tr></thead>
                    <tbody><tr><td>Knight</td><td>1</td><td><div class="progress-bar"><div class="progress-fill" style="width:100.0%;background:var(--team1-color)"></div></div></td></tr></tbody>
                </table>
            </div>
                
            <div class="breakdown-card">
                <h4 style="color:var(--team2-color)">Team 2</h4>
                <table class="breakdown-table">
                    <thead><tr><th>Type</th><th>Count</th><th>%</th></tr></thead>
                    <tbody><tr><td>Pikeman</td><td>1</td><td><div class="progress-bar"><div class="progress-fill" style="width:100.0%;background:var(--team2-color)"></div></div></td></tr></tbody>
                </table>
            </div>
            </div>
        </div>

        <div class="teams-container">
            
        <div class="team-section">
            <details open>
                <summary>Team 1 - 1 units</summary>
                <div class="unit-list">
        <div class="unit team1" id="unit-1-1">
            <div class="unit-header">
                <span class="unit-id">#1</span>
                <span class="unit-type">Knight (K)</span>
                <span class="unit-status alive">Alive</span>
            </div>
            <div class="hp-bar-container">
                <div class="hp-bar">
                    <div class="hp-fill " style="width: 100.0%"></div>
                </div>
                <span class="hp-text">100/100 HP</span>
            </div>
            <div class="unit-stats-grid">
                <div class="stat-item"><span class="stat-label">Pos:</span>(20.0, 20.0)</div>
                <div class="stat-item"><span class="stat-label">Dmg:</span>0</div>
                <div class="stat-item"><span class="stat-label">Tgt:</span>None</div>
            </div>
        </div></div>
            </details>
        </div>
        <div class="team-section">
            <details open>
                <summary>Team 2 - 1 units</summary>
                <div class="unit-list">
        <div class="unit team2" id="unit-2-1">
            <div class="unit-header">
                <span class="unit-id">#1</span>
                <span class="unit-type">Pikeman (P)</span>
                <span class="unit-status alive">Alive</span>
            </div>
            <div class="hp-bar-container">
                <div class="hp-bar">
                    <div class="hp-fill " style="width: 100.0%"></div>
                </div>
                <span class="hp-text">55/55 HP</span>
            </div>
            <div class="unit-stats-grid">
                <div class="stat-item"><span class="stat-label">Pos:</span>(95.0, 20.0)</div>
                <div class="stat-item"><span class="stat-label">Dmg:</span>0</div>
                <div class="stat-item"><span class="stat-label">Tgt:</span>None</div>
            </div>
        </div></div>
            </details>
        </div>
        </div>

        <div class="legend">
            <h3>Unit Legend</h3>
            <ul>
<li><strong>M</strong>: Capped Ram</li>
<li><strong>#</strong>: Castle</li>
<li><strong>A</strong>: Cavalry Archer</li>
<li><strong>C</strong>: Crossbowman</li>
<li><strong>S</strong>: Elite Skirmisher</li>
<li><strong>E</strong>: Elite War Elephant</li>
<li><strong>K</strong>: Knight</li>
<li><strong>V</strong>: Light Cavalry</li>
<li><strong>L</strong>: Long Swordsman</li>
<li><strong>N</strong>: Monk</li>
<li><strong>O</strong>: Onager</li>
<li><strong>P</strong>: Pikeman</li>
<li><strong>R</strong>: Scorpion</li>
<li><strong>T</strong>: Trebuchet</li>
<li><strong>W</strong>: Wonder</li>
            </ul>
        </div>

        <footer>
            <p>MedievAIl Battle Simulator Report</p>
        </footer>
    </div>

    <script>
        let selectedUnitId = null;

        function filterUnits() {
            const input = document.getElementById('unitSearch');
            const filter = input.value.toUpperCase();
            const units = document.getElementsByClassName('unit');

            for (let i = 0; i < units.length; i++) {
                const txtValue = units[i].textContent || units[i].innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    units[i].style.display = "";
                } else {
                    units[i].style.display = "none";
                }
            }
        }

        function toggleDetails(open) {
            const details = document.getElementsByTagName('details');
            for (let i = 0; i < details.length; i++) {
                if (open) {
                    details[i].setAttribute('open', 'true');
                } else {
                    details[i].removeAttribute('open');
                }
            }
        }

        function selectUnit(unitId) {
            // Remove previous selection
            if (selectedUnitId) {
                const prevUnit = document.getElementById(selectedUnitId);
                const prevDot = document.querySelector(`[data-unit-id="${selectedUnitId}"]`);
                if (prevUnit) prevUnit.classList.remove('selected');
                if (prevDot) prevDot.classList.remove('selected');
            }

            // Set new selection
            selectedUnitId = unitId;
            const unit = document.getElementById(unitId);
            const dot = document.querySelector(`[data-unit-id="${unitId}"]`);
            
            if (unit) {
                unit.classList.add('selected');
                unit.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                // Expand the parent details if collapsed
                const details = unit.closest('details');
                if (details && !details.hasAttribute('open')) {
                    details.setAttribute('open', 'true');
                }
            }
            
            if (dot) {
                dot.classList.add('selected');
            }
        }

        // Add click handlers to unit cards
        document.addEventListener('DOMContentLoaded', function() {
            const units = document.getElementsByClassName('unit');
            for (let i = 0; i < units.length; i++) {
                units[i].addEventListener('click', function() {
                    const unitId = this.getAttribute('data-unit-id');
                    selectUnit(unitId);
                });
            }
        });

        let currentZoom = 1;
        
        function zoomMap(delta) {
            currentZoom += delta;
            if (currentZoom < 1) currentZoom = 1;
            if (currentZoom > 5) currentZoom = 5;
            updateMapZoom();
        }
        
        function resetZoom() {
            currentZoom = 1;
            updateMapZoom();
        }
        
        function updateMapZoom() {
            const map = document.getElementById('battleMap');
            if (map) {
                map.style.width = `${currentZoom * 100}%`;
            }
        }
    </script>
</body>
</html>